# BrushedESC Project â€“ Custom H-Bridge ESC

## ğŸ”§ Why an H-Bridge?
A brushed DC motor requires **bidirectional control** (forward & reverse).  
Directly powering the motor only spins it in one direction.  
The **H-Bridge** circuit solves this by allowing current to flow in **both directions**, enabling:  
- Forward rotation  
- Reverse rotation  
- Speed control (via PWM)  
- Motor braking  

---

## Custom H-Bridge Design
Instead of using a motor driver IC (like L293D or BTS7960), we built a **discrete H-Bridge** for learning and flexibility.  

### Components Used
- **2Ã— N-Channel MOSFET** â†’ IRFZ44N  
- **2Ã— P-Channel MOSFET** â†’ IRF9540  
- **2Ã— NPN Transistor** â†’ BC547 (for gate driving of P-MOS)  
- **4Ã— Diodes** â†’ Flyback protection (handles inductive kickback)  
- **4Ã— 10kÎ© Resistors** â†’ Pull-downs / pull-ups for MOSFET stability  
- **2Ã— 10Î© Resistors** â†’ Gate current limiting  
- Breadboard, motor, Arduino/ATTiny for testing  

### Working Principle
- N-channel MOSFETs handle **low-side switching**  
- P-channel MOSFETs handle **high-side switching**  
- BC547 transistors invert and shift logic levels to drive the P-channel MOSFETs correctly  
- Diodes protect against voltage spikes generated by the motor  
- Resistors stabilize gate inputs and prevent unwanted switching  

---

##  Circuit Schematic
Bidirectional H-Bridge for brushed DC motor.  

![Circuit Schematic](circuit_schematic.jpg)

---

## Breadboard Implementation
Practical build of the H-Bridge with MOSFETs, resistors, and diodes.  

![H-Bridge Breadboard](hbridge_breadboard.jpg)

---

## Brushed Motor + ESC Setup
Testing setup with Arduino/ATTiny connected to H-Bridge and motor.  

![Brushed Motor ESC Setup](brushed_motor_esc.jpg)

---

## ğŸ“Œ Pinouts

### ATTiny (Single Channel ESC)
- **OUT1** â†’ Motor terminal 1  
- **OUT2** â†’ Motor terminal 2  
- **IN** â†’ PWM signal input (from RC receiver)  
- **GND** â†’ Ground  
- **VCC** â†’ Motor power supply  

### Arduino Nano (Dual Channel ESC)
- **OUT1A (D3)** â†’ Motor A terminal 1  
- **OUT2A (D5)** â†’ Motor A terminal 2  
- **INA (D2)** â†’ PWM input for Motor A  
- **OUT1B (D6)** â†’ Motor B terminal 1  
- **OUT2B (D9)** â†’ Motor B terminal 2  
- **INB (D4)** â†’ PWM input for Motor B  

---

## ğŸ’» Firmware

### ATTiny â€“ Single Channel
File: `attiny.ino`  
Reads **one PWM signal** and controls a single motor.  

### Arduino Nano â€“ Dual Channel
File: `atmega.ino`  
Reads **two PWM signals** and controls two motors independently.  

---

## ğŸ“– How it Works
1. RC receiver sends **PWM input (1000â€“2000 Âµs)**  
2. ATTiny/Arduino measures the pulse width using **Pin Change Interrupts**  
3. Pulse width is compared to the **middle point (1500 Âµs)**  
   - Above 1500 â†’ Motor spins forward  
   - Below 1500 â†’ Motor spins backward  
4. PWM duty cycle is mapped (0â€“255) â†’ sets motor speed  

---

## ğŸ“ Notes
- Breadboard version is for testing â†’ final design should move to PCB  
- Use **low Rds(on) MOSFETs** for better efficiency  
- For higher current, consider **driver ICs** like DRV8873 or BTS7960  

---

## ğŸ“‚ Repository Files
- `attiny.ino` â†’ ATTiny single channel ESC code  
- `atmega.ino` â†’ Arduino Nano dual channel ESC code  
- `circuit_schematic.jpg` â†’ H-Bridge schematic  
- `hbridge_breadboard.jpg` â†’ Breadboard H-Bridge  
- `brushed_motor_esc.jpg` â†’ Motor + ESC setup  

---

## ğŸ“œ License
MIT License â€“ Free to use and modify  
